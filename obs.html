<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  margin:0;
  background:transparent;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-family:Arial, sans-serif;
}

#numero{
  font-size:80px;
  color:white;
  text-shadow:0 0 12px #ffffff;
  display:none;
}

#label{
  font-size:28px;
  color:white;
  margin-top:-12px;
  display:none;
}

video{
  width:220px;
  display:none;
}
</style>
</head>
<body>

<div id="numero"></div>
<div id="label">Sucessos</div>
<video id="video" src="dice_animation.webm" muted playsinline></video>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBzniGkaFn9HzyeS9XhQ9cAETXWIPFcsQw",
  authDomain: "sociedade-mitra-dados.firebaseapp.com",
  databaseURL: "https://sociedade-mitra-dados-default-rtdb.firebaseio.com",
  projectId: "sociedade-mitra-dados",
  storageBucket: "sociedade-mitra-dados.firebasestorage.app",
  messagingSenderId: "155136545326",
  appId: "1:155136545326:web:b9721595277fb7cef685bf"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const numero = document.getElementById('numero');
const label = document.getElementById('label');
const video = document.getElementById('video');

let hideTimeout;

db.ref("dados").on("value", snap=>{
  if(!snap.exists()) return;

  const {sucessos} = snap.val();

  // RESET
  clearTimeout(hideTimeout);
  numero.style.display = 'none';
  label.style.display = 'none';

  // VIDEO
  video.style.display = 'block';
  video.currentTime = 0;
  video.play();

  // MOSTRA RESULTADO
  setTimeout(()=>{
    numero.textContent = sucessos;
    numero.style.display = 'block';
    label.style.display = 'block';
  },1000);

  // LIMPA TUDO
  hideTimeout = setTimeout(()=>{
    video.style.display = 'none';
    numero.style.display = 'none';
    label.style.display = 'none';
  },7000);
});
</script>

</body>
</html>
